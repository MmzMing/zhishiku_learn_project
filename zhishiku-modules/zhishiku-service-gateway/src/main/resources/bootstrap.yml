# Tomcat
server:
  servlet:
    context-path: /gateway
  port: 30000
# Spring
spring:
  application:
    name: zhishiku-service-gateway
  profiles:
    active: dev
  main:
    # 临时允许循环依赖（按需开启，非必需）
    allow-circular-references: true
    # 临时允许 Bean 覆盖（按需开启，非必需）
    allow-bean-definition-overriding: true
  cloud:
    nacos:
      #配置文件相关配置
      config:
        file-extension: yaml
        refresh-enabled: true
        shared-configs:
          - data-id: application.yaml
            group: ${spring.profiles.active}
            refresh: true
        extension-configs:
          - data-id: ${spring.application.name}-${spring.profiles.active}.yaml
            group: ${spring.profiles.active}
            refresh: true
      #服务注册相关配置
      discovery:
        group: ${spring.profiles.active}
  sentinel:
    # 取消控制台懒加载
    eager: true
    transport:
      # 控制台地址
      dashboard: ${sentinel.dashboard-addr}
    # nacos配置持久化
    datasource:
      ds1:
        nacos:
          # username: service
          # password: pos20211230
          server-addr: ${spring.cloud.nacos.server-addr}  # 现在能正确引用了
          namespace: ${spring.cloud.nacos.namespace}  # 补充命名空间（关键）
          dataId: sentinel-zhishiku-gateway
          groupId: dev
          data-type: json
          rule-type: flow