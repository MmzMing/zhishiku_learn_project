请求到达

↓

GlobalFilter (GatewayAuthFiler)

↓

GatewayFilter (BlackUrlFiler)

↓

GatewayFilter (ValidateCodeFilter)

↓

路由匹配和处理 ← 这里执行 RouterFunctionConfiguration 配置的路由

↓

目标服务Handler处理

↓

响应返回（异常时触发ExceptionHandler）

Handler执行顺序
1. 异常处理器优先级最高
   GatewayExceptionHandler - 网关统一异常处理
   使用 @Order(-1) 注解，具有最高优先级
   在任何异常发生时最先执行
2. 限流降级处理器
   SentinelFallbackHandler - Sentinel限流异常处理
   当触发限流规则时执行
   优先级高于普通业务处理
3. 函数式路由处理器
   ValidateCodeHandler - 验证码处理
   通过 RouterFunctionConfiguration 配置路由
   当请求匹配 /code 路径时执行
4. 目标服务处理器
   下游微服务中的各种业务处理器
   在路由转发后由目标服务处理